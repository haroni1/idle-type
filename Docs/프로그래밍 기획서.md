## 1. 개발 개요

### **1-1. 개발 엔진**

- Unity 2022.x (URP 여부 선택)
    

### **1-2. 개발 목표**

- 낮/밤 루프를 가진 로그라이크 + 경영 게임 구축
    
- 구조 확장성을 최우선으로 설계 (콘텐츠 추가 용이)
    

### **1-3. 아키텍처 스타일**

- **GameManager 중심의 State Machine 구조**
    
- **ScriptableObject 기반 데이터 드리븐 방식**
    
- **Manager 중심 시스템 구성**
    
- **이벤트 기반(GameEvent) 처리**
    

---

## 2. 전체 시스템 구조 (System Architecture)

GameManager  ← 상태 관리 (Day / Night / Shop)

DayManager ← 낮: 전투 + 스폰

ChickenSpawner PlayerCombat  Enemy(chicken)
                            (Follow AI)

 NightManager  │  ← 밤: 조리 및 판매
---
 FryManager │  ← 미니 게임

OrderManager │  ← 손님 대응

 ShopManager  │  ← 상점(업그레이드)
## 3. 주요 시스템 상세 설계

---

# **3-1. GameManager (게임 전체 상태 관리)**

### 역할

- Day / Night / Shop 상태 전환
    
- 하루 루프 관리
    
- 전역 변수 관리 (money, rawChicken 등)
    

### 상태 정의

`public enum GameState {     Day,     Night,     Shop }`

### GameManager 필수 변수

`public int rawChickenCount; public int money; public GameState currentState;`

### 상태 전환 메서드

`public void ChangeState(GameState newState) {     currentState = newState;     OnStateEnter(newState); }`

---

# **3-2. DayManager (닭 사냥 파트)**

### 기능

- 타이머 관리
    
- 닭 스폰 개수 조절
    
- Wave 증가 시스템
    

### 핵심 변수

`public float dayDuration = 60f; public float spawnInterval = 2f; public int chickenIncreaseRate = 1;`

### 흐름

1. 시작 시 타이머 시작
    
2. 일정 시간마다 닭 스폰
    
3. 시간이 끝나면 Night 상태로 전환
    

---

# **3-3. ChickenSpawner**

### 기능

- 플레이어 주변 랜덤 위치에 닭 생성
    
- 난이도에 따라 스폰 수 증가
    

### 스폰 로직

`Vector2 spawnPos = playerPos + Random.insideUnitCircle.normalized * spawnRadius; Instantiate(chickenPrefab, spawnPos, Quaternion.identity);`

---

# **3-4. Chicken AI (적 AI)**

### 행동

- 플레이어 추적
    
- 충돌 시 공격
    
- 피격 시 사망 → rawChickenCount 증가
    

### 클래스 구조

`public class Chicken : MonoBehaviour {     float hp;     float moveSpeed; }`

### 사망 처리

`GameManager.Instance.rawChickenCount++; Destroy(gameObject);`

---

# **3-5. PlayerCombat**

### 초기 단계

- 근접 공격 또는 자동 공격
    

### 확장 가능 구조

무기별 클래스를 따로 만드는 대신 **WeaponBase → 각 무기 상속** 구조.

---

# **3-6. NightManager (조리 시스템 메인)**

### 기능

- rawChickenCount만큼 라운드를 생성
    
- OrderManager에서 주문 생성
    
- FryManager에서 조리 미니게임 실행
    
- 결과를 money에 반영
    

### 흐름

`StartNight()       ↓   주문 생성       ↓   미니게임(게이지/타이밍 등) 실행       ↓   결과 반영       ↓   반복(닭 소진 시 종료)`  

---

# **3-7. FryManager (튀기기 미니게임)**

### 가능 미니게임 예시

- 타이밍 게이지
    
- 온도 조절(슬라이더)
    

### 성공도 계산

`float success = Mathf.Clamp(accuracy, 0f, 1f); int income = Mathf.RoundToInt(basePrice * success); GameManager.Instance.money += income;`

---

# **3-8. OrderManager**

### 주문 템플릿

ScriptableObject로 구성:

`[CreateAssetMenu] public class OrderData : ScriptableObject {     public string orderName;     public int basePrice;     public Sprite icon; }`

### 랜덤 주문 생성

`OrderData randomOrder = orderList[Random.Range(0, orderList.Count)];`

---

# **3-9. ShopManager (상점 / 업그레이드)**

### 업그레이드 방식

ScriptableObject로 저장:

`public enum UpgradeType { AttackSpeed, MoveSpeed, FrySpeed, MaxOrders }  public class UpgradeData : ScriptableObject {     public UpgradeType type;     public float value;     public int price; }`

### 구매 처리

`if (money >= upgrade.price) {     ApplyUpgrade(upgrade); }`

### 업그레이드 적용

`switch(upgrade.type) {     case AttackSpeed: player.attackSpeed += upgrade.value; break;     case MoveSpeed: player.moveSpeed += upgrade.value; break;     ... }`

---

## 4. 데이터 구조 설계

### ScriptableObject 목록

- ChickenData
    
- OrderData
    
- UpgradeData
    
- WeaponData
    
- DifficultyCurveData
    

확장성 최고임.

---

## 5. 씬 구성 (Scene Structure)

`MainScene (권장) 
├── Managers 
│   ├── GameManager 
│   ├── DayManager 
│   ├── NightManager 
│   ├── ShopManager 
│   ├── UIManager 
│ 
├── Player 
├── ChickenSpawner 
├── EnemyContainer 
├── UI Canvas`

모든 시스템을 하나의 씬에서 **GameState로 제어**하는 구조가 가장 간단하고 안정적.

---

## 6. 개발 우선순위 및 일정

### **1단계: Day 프로토타입 (1~2주)**

- 이동
    
- 닭 스폰
    
- 추적 AI
    
- 공격
    
- 생닭 얻기
    

### **2단계: Night 프로토타입 (1주)**

- 주문 생성
    
- 튀기기 미니게임
    
- 판매 로직
    

### **3단계: Shop 구축 (1주)**

- 업그레이드 데이터
    
- 구매 UI
    
- 능력 적용
    

### **4단계: 풀 루프 완성 (1주)**

- Day → Night → Shop → Day 반복 구현
    

### **5단계: 콘텐츠 확장 (2~4주)**

- 무기 추가
    
- 닭 종류 추가
    
- 주문/메뉴 확장
    
- 연출/사운드 추가
    

---

## 7. 코드 작성 규칙 / 개발 규칙

- **Manager / Controller / Data** 역할 명확히 구분
    
- Update 최소화 → 가능하면 이벤트 기반 구조
    
- ScriptableObject로 하드코딩 최소화
    
- Prefab 기반으로 오브젝트 표준화
    
- 공통 기능은 Utility 클래스에 정리
----------------------------------------
    

---
